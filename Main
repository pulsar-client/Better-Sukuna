local player = game:GetService("Players").LocalPlayer

local function load(url)
    local success, result = pcall(function()
        return loadstring(game:HttpGet(url, true))
    end)

    if success and result then
        result()
    else
        warn("Failed to load:", url)
    end
end

-- This function runs every time you spawn
local function onCharacterAdded(character)
    print("New character detected. Loading scripts...")

    -- 1. Load immediate scripts/dependencies
    load("https://raw.githubusercontent.com/pulsar-client/Better-Sukuna/refs/heads/main/Script")
    load("https://raw.githubusercontent.com/pulsar-client/Better-KadeJ/refs/heads/main/External/Buffer")
    

    -- 2. Wait 3 seconds then load Tableflip
    task.spawn(function()
        task.wait(3)
        load("https://raw.githubusercontent.com/pulsar-client/Better-Sukuna/refs/heads/main/Tableflip")
        
        -- Notification for Delta console/UI
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "Delta Executor",
            Text = "Tableflip loaded after respawn.",
            Duration = 3
        })
    end)
end

-- Connect the function to the CharacterAdded event
player.CharacterAdded:Connect(onCharacterAdded)

-- Run it once immediately in case you are already spawned
if player.Character then
    onCharacterAdded(player.Character)
end
